---
const navLinks = [
  { label: 'Products', href: '/products' },
  { label: 'Solutions', href: '/solutions' },
  { label: 'About', href: '/about' },
  { label: 'Contact', href: '/contact' },
];

const products = [
  {
    category: 'Data Models',
    items: [
      { name: 'IFDM', desc: 'Industry data model for finance', href: '/products#ifdm' },
      { name: 'ITDM', desc: 'Industry data model for telecom', href: '/products#itdm' },
      { name: 'HRDM', desc: 'Human resources data model', href: '/products#hrdm' },
    ]
  },
  {
    category: 'Data Platform & Governance',
    items: [
      { name: 'ICC', desc: 'Data consistency & quality control', href: '/products#icc' },
      { name: 'ReTouch', desc: 'Validated data entry & RDM', href: '/products#retouch' },
      { name: 'Retable AI', desc: 'No-code apps & data tables', href: '/products#retable' },
    ]
  },
  {
    category: 'AI Products',
    items: [
      { name: 'Talk To', desc: 'Natural language data interaction', href: '/products#talkto' },
      { name: 'Blue Octopus', desc: 'Event monitoring & action management', href: '/products#blueoctopus' },
      { name: 'VAR', desc: 'AI-powered voice analysis & recognition', href: '/products#var' },
    ]
  }
];
---

<header class="site-header">
  <div class="container header-inner">
    <!-- Logo -->
    <a href="/" class="brand" aria-label="Intellica Home">
      <img src="/assets/img/intellica-logo.png" alt="Intellica" class="brand-logo" height="36" />
    </a>

    <!-- Desktop Nav -->
    <nav class="nav-desktop" aria-label="Main Navigation">
      <!-- Products Mega Menu -->
      <div class="nav-item" data-dropdown>
        <button type="button" aria-haspopup="true" aria-expanded="false" class="nav-link nav-link--dd">
          Products
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none" class="chevron">
            <path d="M2 4l4 4 4-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <div class="dd-menu mega-menu">
          <div class="mega-inner">
            {products.map(group => (
              <div class="mega-col">
                <div class="mega-col-title">{group.category}</div>
                {group.items.map(item => (
                  <a href={item.href} class="mega-item">
                    <div class="mega-item-name">{item.name}</div>
                    <div class="mega-item-desc">{item.desc}</div>
                  </a>
                ))}
              </div>
            ))}
          </div>
          <div class="mega-footer">
            <a href="/products" class="mega-footer-link">
              View All Products â†’
            </a>
          </div>
        </div>
      </div>

      <a href="/solutions" class="nav-link">Solutions</a>
      <a href="/about" class="nav-link">About</a>
      <a href="/contact" class="nav-link">Contact</a>
    </nav>

    <!-- CTA -->
    <div class="header-actions">
      <a href="/contact" class="btn btn-primary btn-sm">
        Request Demo
      </a>
    </div>
  </div>
</header>

<style>
/* Header */
.site-header {
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 1000;
  height: var(--header-h);
  border-bottom: 1px solid transparent;
  transition: background 0.3s ease, border-color 0.3s ease, backdrop-filter 0.3s ease;
}
.site-header.scrolled {
  background: rgba(3, 11, 22, 0.85);
  border-bottom-color: rgba(255,255,255,0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}
.header-inner {
  display: flex;
  align-items: center;
  height: 100%;
  gap: 32px;
}
.brand { display: flex; align-items: center; }
.brand-logo { height: 36px; width: auto; filter: invert(1) hue-rotate(180deg); }

/* Desktop Nav */
.nav-desktop {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-left: auto;
}
.nav-link {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  padding: 8px 14px;
  border-radius: 8px;
  font-size: 0.9rem;
  font-weight: 500;
  color: rgba(240,244,255,0.8);
  transition: color 0.2s ease, background 0.2s ease;
  cursor: pointer;
  background: none;
  border: none;
  font-family: var(--font);
}
.nav-link:hover, .nav-link--dd:hover {
  color: #fff;
  background: rgba(255,255,255,0.08);
}
.chevron {
  transition: transform 0.2s ease;
}
[aria-expanded="true"] .chevron {
  transform: rotate(180deg);
}

/* Header Actions */
.header-actions {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-left: 8px;
}

/* Dropdown */
.nav-item { position: relative; }
.dd-menu {
  display: none;
  position: absolute;
  top: calc(100% + 12px);
  left: 50%;
  transform: translateX(-50%);
  background: rgba(8, 15, 30, 0.97);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: var(--radius-md);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  box-shadow: 0 24px 80px rgba(0,0,0,0.5);
  animation: fadeUp 0.2s ease forwards;
  z-index: 100;
}
.dd-menu.open { display: block; }

/* Mega Menu */
.mega-menu {
  width: 680px;
  left: 0;
  transform: none;
}
.mega-inner {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0;
  padding: 24px;
}
.mega-col { padding: 8px; }
.mega-col-title {
  font-size: 0.7rem;
  font-weight: 800;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--clr-primary);
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(0, 200, 150, 0.15);
}
.mega-item {
  display: block;
  padding: 10px;
  border-radius: 8px;
  transition: background 0.2s ease;
  margin-bottom: 2px;
}
.mega-item:hover { background: rgba(255,255,255,0.05); }
.mega-item-name {
  font-size: 0.88rem;
  font-weight: 700;
  color: #F0F4FF;
  margin-bottom: 2px;
}
.mega-item-desc {
  font-size: 0.75rem;
  color: var(--clr-muted);
  line-height: 1.4;
}
.mega-footer {
  border-top: 1px solid rgba(255,255,255,0.07);
  padding: 12px 24px;
}
.mega-footer-link {
  font-size: 0.82rem;
  font-weight: 600;
  color: var(--clr-primary);
  transition: color 0.2s ease;
}
.mega-footer-link:hover { color: var(--clr-secondary); }

@media (max-width: 900px) {
  .nav-desktop { display: none; }
  .header-actions .btn { display: none; }
}
</style>
